<% content_for :js do %>
  <%= javascript_include_tag "analysis_matrices", "data-turbolinks-track" => true %>

  <%= javascript_tag do %>
    LNX_INCIDENT_PLANNING.FROM_RAILS.AnalysisMatrix = {
      create_strategy_path: "<%= incident_cycle_strategies_path(@incident, @cycle) %>",
      create_tactic_path: "<%= incident_cycle_tactics_path(@incident, @cycle) %>"
    };
  <% end %>
<% end %>

<h1>Tactics Matrix</h1>

<table class="analysis-matrix" id="analysis-matrix">
  <thead>
    <tr>
      <th rowspan="2" class="header objective">Objectives</th>
      <th class="header strategy" colspan="2">Strategies</th>
      <th class="header tactic" colspan="5">Tatics</th>
    </tr>
    <tr>
      <th class="header strategy">How</th>
      <th class="header strategy">Why</th>
      <th class="header tactic">Who</th>
      <th class="header tactic">What</th>
      <th class="header tactic">Where</th>
      <th class="header tactic">When</th>
      <th class="header tactic">Response Action</th>
    </tr>
  </thead>

  <tbody>
    <% each_row(@matrix_data) do |row| %>
      <tr>
        <%= row.objective_cells.render %>

        <%= row.strategy_cells.render %>

        <%= row.tactic_cells.render %>
      </tr>
    <% end %>
  </tbody>
</table>
